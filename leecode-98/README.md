# 98.éªŒè¯äºŒå‰æœç´¢æ ‘

## æ€è·¯ä¸€ï¼šé€’å½’ + æ”¶ç¼©åŒºé—´

```java
class Solution {
    public boolean isValidBST(TreeNode root) {
        return helper(root, Long.MIN_VALUE, Long.MAX_VALUE);
    }

    private boolean helper(TreeNode node, long min, long max) {
        if (node == null) return true;
        if (node.val <= min || node.val >= max) return false;
        return helper(node.left, min, node.val) 
            && helper(node.right, node.val, max);
    }
}

```

## âœ… éªŒè¯äºŒå‰æœç´¢æ ‘ â€”â€” é€’å½’ + æ”¶ç¼©åŒºé—´æ³•æ€»ç»“

1. **æ ¸å¿ƒæ€æƒ³**
   æ•´æ£µæ ‘è¦æ»¡è¶³äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰æ€§è´¨ï¼š

   > å·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼ < æ ¹èŠ‚ç‚¹å€¼ < å³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼ã€‚

   å› æ­¤ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¿…é¡»ä½äºä¸€ä¸ªåŠ¨æ€å˜åŒ–çš„ã€Œåˆæ³•åŒºé—´ã€ä¸­ï¼Œè¿™ä¸ªåŒºé—´ä¼šéšç€é€’å½’ä¸æ–­**æ”¶ç¼©**ã€‚

------

1. **åˆå§‹åŒºé—´**
   åˆå§‹æ—¶æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œå¯ä»¥è®¤ä¸ºèŒƒå›´æ˜¯ï¼š

   ```
   (-âˆ, +âˆ)
   ```

   åœ¨ä»£ç ä¸­ï¼Œä¸ºäº†é¿å…æ•´æ•°è¾¹ç•Œå†²çªï¼Œç”¨ `Long.MIN_VALUE` å’Œ `Long.MAX_VALUE` è¡¨ç¤ºâ€œæ— é™å°â€å’Œâ€œæ— é™å¤§â€ï¼Œ
   è¿™æ ·èƒ½ç¡®ä¿æ‰€æœ‰ `int` ç±»å‹çš„èŠ‚ç‚¹å€¼éƒ½å¤„äºè¿™ä¸ªèŒƒå›´å†…ã€‚

------

1. **é€’å½’é€»è¾‘**
    - è‹¥å½“å‰èŠ‚ç‚¹ä¸º `null`ï¼Œè¯´æ˜å·²åˆ°å¶å­èŠ‚ç‚¹ï¼Œè¿”å› `true`ï¼›
    - è‹¥å½“å‰èŠ‚ç‚¹çš„å€¼ä¸åœ¨ `(min, max)` åŒºé—´å†…ï¼Œè¿”å› `false`ï¼›
    - å¦åˆ™ç»§ç»­é€’å½’æ£€æŸ¥å·¦å³å­æ ‘ï¼š
        - å·¦å­æ ‘çš„åˆæ³•åŒºé—´æ˜¯ `(min, node.val)`
        - å³å­æ ‘çš„åˆæ³•åŒºé—´æ˜¯ `(node.val, max)`

------

1. **åŒºé—´æ”¶ç¼©çš„æ„ä¹‰**
    - æ¯æ·±å…¥ä¸€å±‚é€’å½’ï¼Œå½“å‰èŠ‚ç‚¹çš„å€¼å°±æˆä¸ºä¸‹ä¸€å±‚çš„ä¸Šç•Œæˆ–ä¸‹ç•Œï¼›
    - è¿™æ ·å¯ä»¥ä¿è¯ï¼š
        - å·¦å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¸¥æ ¼å°äºæ ¹èŠ‚ç‚¹ï¼›
        - å³å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¸¥æ ¼å¤§äºæ ¹èŠ‚ç‚¹ï¼›
    - å³ä½¿å­æ ‘è·¨å±‚ï¼ˆä¾‹å¦‚å·¦å­æ ‘ä¸­çš„å³å­©å­ï¼‰ï¼Œå®ƒä¹Ÿä¸èƒ½çªç ´æœ€åˆæ ¹èŠ‚ç‚¹è®¾ä¸‹çš„åŒºé—´é™åˆ¶ã€‚

é¦–å…ˆèŒƒå›´éœ€è¦ä»æ— ç©·å°åˆ°æ— ç©·å¤§åŒºé—´ï¼Œå¦‚æœæˆ‘ä»¬ç”¨intçš„minå’Œmaxè¿˜æ˜¯ä¸å¤Ÿå¤§ï¼Œä¼šå­˜åœ¨æº¢å‡ºé—®é¢˜ï¼Œæ‰€ä»¥ä½¿ç”¨æ›´å¤§ä¸€ä¸ªèŒƒå›´çš„ï¼Œé‚£å°±æ˜¯Longç±»å‹çš„ï¼›ç„¶åé€’å½’çš„æ€æƒ³å°±æ˜¯å¦‚æœæ˜¯ç©ºæ ‘ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›trueï¼Œå¦‚æœä¸åœ¨å½“å‰èŠ‚ç‚¹åœ¨åŒºé—´ä¹‹å†…ï¼Œä¹Ÿå°±æ˜¯å¦‚æœå½“å‰èŠ‚ç‚¹ä¼ å…¥çš„æ˜¯å·¦èŠ‚ç‚¹å¤§äºç­‰äºäº†minæˆ–è€…å³èŠ‚ç‚¹å°äºç­‰äºäº†maxï¼Œé‚£ä¹ˆéœ€è¦å‘ä¼šfalseï¼Œæ€»ä¹‹éœ€è¦çš„åŒºé—´èŒƒå›´å°±æ˜¯(min, max);é€’å½’æ˜¯ä¼ å…¥å½“å‰èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯å·¦èŠ‚ç‚¹ï¼Œé‚£ä¹ˆmaxå°±æ˜¯å½“å‰èŠ‚ç‚¹å€¼ï¼Œå¦‚æœæ˜¯å³èŠ‚ç‚¹ï¼Œé‚£ä¹ˆminå°±æ˜¯å½“å‰èŠ‚ç‚¹å€¼ï¼Œæ€»ä¹‹å°±æ˜¯è®©å·¦èŠ‚ç‚¹å°äºæ ¹èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹å¤§äºæ ¹èŠ‚ç‚¹ï¼Œæ¯”è¾ƒçš„æ˜¯å€¼å¤§å°ï¼›è¿™ç§æ–¹å¼å°±å¾ˆå¥½çš„é¿å…äº†å¦‚æœé€’å½’ä¸­ï¼Œæ¯”å¦‚å·¦å­æ ‘ï¼Œéå†åˆ°çš„å³å­©å­ä¸å¯èƒ½æ¯”æ ¹èŠ‚ç‚¹å¤§ï¼Œå› ä¸ºä¼ å…¥æ ¹èŠ‚ç‚¹ï¼Œä¼šåœ¨å³å­æ ‘åŒºé—´è®¾ç½®æœ€å°å€¼ä¸ºæ ¹èŠ‚ç‚¹å€¼å¤§å°ï¼Œä¸æ»¡è¶³ç›´æ¥false;æ€»ç»“ä¸€ä¸‹

### âœ… æ–¹æ³•äºŒï¼šä¸­åºéå†ï¼ˆInorder Traversalï¼‰ - å¾…åš

**æ ¸å¿ƒæ€æƒ³ï¼š**

- äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ç»“æœä¸€å®šæ˜¯ **ä¸¥æ ¼é€’å¢** çš„åºåˆ—ï¼›
- åªè¦åœ¨ä¸­åºéå†æ—¶å‘ç°å½“å‰èŠ‚ç‚¹å€¼ â‰¤ å‰ä¸€ä¸ªèŠ‚ç‚¹å€¼ï¼Œå³å¯åˆ¤å®šä¸º `false`ã€‚

#### é€’å½’å®ç°ï¼š

```
class Solution {
    long prev = Long.MIN_VALUE;

    public boolean isValidBST(TreeNode root) {
        if (root == null) return true;
        if (!isValidBST(root.left)) return false;
        if (root.val <= prev) return false;
        prev = root.val;
        return isValidBST(root.right);
    }
}
```

#### è¿­ä»£å®ç°ï¼ˆä¸­åºéå†æ ˆç‰ˆï¼‰ï¼š

```
class Solution {
    public boolean isValidBST(TreeNode root) {
        Stack<TreeNode> stack = new Stack<>();
        TreeNode curr = root;
        long prev = Long.MIN_VALUE;

        while (curr != null || !stack.isEmpty()) {
            while (curr != null) {
                stack.push(curr);
                curr = curr.left;
            }
            curr = stack.pop();
            if (curr.val <= prev) return false;
            prev = curr.val;
            curr = curr.right;
        }
        return true;
    }
}
```

------

## ğŸ“š å››ã€å¯¹æ¯”æ€»ç»“

| æ–¹æ³•       | æ€æƒ³                   | ä¼˜ç‚¹               | ç¼ºç‚¹                 |
| ---------- | ---------------------- | ------------------ | -------------------- |
| é€’å½’èŒƒå›´æ³• | æ¯ä¸ªèŠ‚ç‚¹çº¦æŸåœ¨åˆæ³•åŒºé—´ | æ¸…æ™°ã€é€šç”¨ã€æ˜“æ‰©å±• | éœ€è¦ä¼ å‚ä¸Šä¸‹ç•Œ       |
| ä¸­åºéå†æ³• | åˆ©ç”¨ä¸­åºé€’å¢ç‰¹æ€§       | ç®€æ´ã€ç›´è§‚         | éœ€ç†è§£ä¸­åºåºåˆ—å•è°ƒæ€§ |