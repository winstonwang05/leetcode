# 169.å¤šæ•°å…ƒç´ 

# æ€è·¯ä¸€ï¼šæš´åŠ›æšä¸¾

```java
package com.leetcode;
// æš´åŠ›æšä¸¾
public class SolutionOne {
    public int majorityElement(int[] nums) {
        // è®¾ç½®å…¨å±€æœ€å¤§
        int MaxCount = 0;
        int candidate = nums[0];
        // éå†æœ€å¤–å±‚
        for (int i = 0; i < nums.length; i++) {
            // è®¾ç½®å½“å‰å…ƒç´ çš„ä¸ªæ•°
            int curCount = 1;
            for (int j = i + 1; j < nums.length; j++) {
                // å¦‚æœé‡åˆ°ç›¸åŒåˆ™ +1
                if (nums[j] == nums[i]) {
                    curCount++;
                }
            }
            // éå†ç»“æŸæ›´æ–°å…¨å±€æœ€å¤§ï¼Œå¹¶ä¸”è®°å½•æ­¤æ—¶æœ€å¤§å¯¹åº”çš„ç´¢å¼•å…ƒç´ 
            if (curCount > MaxCount) {
                MaxCount = curCount;
                candidate = nums[i];
            }
        }
        return candidate;
    }
}

```

# æ€è·¯äºŒï¼šå“ˆå¸Œè¡¨å­˜å‚¨

```java
class Solution {
    public int majorityElement(int[] nums) {
        // åˆå§‹åŒ–å“ˆå¸Œè¡¨
        Map<Integer, Integer> map = new HashMap<>();
        int n = nums.length;
        for (int num : nums) {
            // å¦‚æœå­˜åœ¨ï¼Œvalue + 1
            /*if (map.containsKey(num)) {
                map.put(num, map.get(num) + 1);
            } else {
                map.put(num, 1);
            }*/
            map.put(num, map.getOrDefault(num, 0) + 1);
            if (map.get(num) > n/2) {
                return num;
            }
        }
        return -1;
    }
}
```

map.getOrDefault(num, 0) + 1çš„ç”¨æ³•å’Œä¸Šé¢çš„if elseä¸€æ ·ï¼Œè¿™é‡Œæ˜¯å¦‚æœå­˜åœ¨è¿™ä¸ªkeyå°±ç”¨numï¼Œ getï¼ˆnumï¼‰+1ï¼›å¦‚æœä¸å­˜åœ¨é»˜è®¤å– 0 ç„¶ååŠ 1ï¼›

# æ€è·¯ä¸‰ï¼šBoyer-Moore æŠ•ç¥¨ç®—æ³•

## âœ… å®Œæ•´è¡¨è¿°ä¼˜åŒ–ç‰ˆ

æˆ‘çš„ç†è§£æ˜¯ï¼š

> é¢˜ç›®è¦æ±‚æ‰¾åˆ°å‡ºç°æ¬¡æ•°è¶…è¿‡æ•°ç»„é•¿åº¦ä¸€åŠçš„å…ƒç´ ã€‚å› ä¸ºè¿™ä¸ªå…ƒç´ æ•°é‡å å¤šæ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ **Boyer-Moore æŠ•ç¥¨ç®—æ³•** æ¥è§£å†³é—®é¢˜ã€‚
>
> æ ¸å¿ƒæ€æƒ³æ˜¯â€œæŠµæ¶ˆè®¡æ•°â€ï¼š
>  ä¸æ–­åœ°å°†ä¸åŒçš„å…ƒç´ ä¸¤ä¸¤æŠµæ¶ˆï¼Œæœ€åå‰©ä¸‹çš„é‚£ä¸ªå…ƒç´ ä¸€å®šæ˜¯å¤šæ•°å…ƒç´ ã€‚

------

### ğŸ§  å®ç°æ€è·¯ï¼š

1. **åˆå§‹åŒ–ä¸¤ä¸ªå˜é‡**ï¼š

    - `candidate`ï¼šå€™é€‰äººå…ƒç´ 
    - `count`ï¼šå½“å‰å€™é€‰äººçš„è®¡æ•°å€¼

2. **éå†æ•°ç»„**ï¼š

    - å¦‚æœå½“å‰è®¡æ•°ä¸º `0`ï¼Œè¯´æ˜ä¹‹å‰çš„å€™é€‰äººå·²ç»è¢«æŠµæ¶ˆå®Œäº†ï¼ˆå³ä¹‹å‰å‡ºç°çš„å…ƒç´ è¢«å…¶ä»–å…ƒç´ å¹³è¡¡æ‰äº†ï¼‰ï¼Œæ‰€ä»¥æ›´æ–°å€™é€‰äººï¼š

      ```
      candidate = num;
      ```

    - å¦‚æœå½“å‰å…ƒç´ ç­‰äºå€™é€‰äººï¼Œ`count++`ï¼›å¦åˆ™ `count--`ã€‚

3. **éå†ç»“æŸå**ï¼š

    - å› ä¸ºå¤šæ•°å…ƒç´ çš„å‡ºç°æ¬¡æ•°å¤§äºæ€»é•¿åº¦çš„ä¸€åŠï¼Œæ‰€ä»¥å³ä½¿ç»è¿‡æŠµæ¶ˆï¼Œå®ƒä»ç„¶ä¼šç•™ä¸‹æ¥ï¼Œæœ€ç»ˆ `candidate` å°±æ˜¯å¤šæ•°å…ƒç´ ã€‚

------

### âš™ï¸ ä»£ç å®ç°ï¼š

```
public int majorityElement(int[] nums) {
    int count = 0;
    int candidate = 0;

    for (int num : nums) {
        if (count == 0) {
            candidate = num;
        }
        count += (num == candidate) ? 1 : -1;
    }

    return candidate;
}
```

------

### ğŸ“˜ æ ¸å¿ƒç†è§£æ€»ç»“ï¼š

- **ä¸ºä»€ä¹ˆå¯ä»¥æŠµæ¶ˆï¼Ÿ**
  å› ä¸ºé¢˜ç›®ä¿è¯å¤šæ•°å…ƒç´ å‡ºç°æ¬¡æ•° > n / 2ï¼Œæ‰€ä»¥æ— è®ºæ€ä¹ˆæŠµæ¶ˆï¼Œå®ƒæœ€åä¸€å®šè¿˜ä¼šå‰©ä¸‹ã€‚
- **ä¸ºä»€ä¹ˆæ›´æ–°å€™é€‰äººæ˜¯å½“å‰å…ƒç´ è€Œä¸æ˜¯ä¸‹ä¸€ä¸ªï¼Ÿ**
  å› ä¸ºâ€œè®¡æ•°å½’é›¶â€æ˜¯å½“å‰éå†çŠ¶æ€ä¸‹çš„ç»“æœï¼Œè¡¨ç¤ºæ—§å€™é€‰äººå½»åº•å‡ºå±€ï¼Œæ‰€ä»¥ç«‹åˆ»è®©**å½“å‰å…ƒç´ **æˆä¸ºæ–°çš„å€™é€‰äººã€‚
- **æœ€ç»ˆè¿”å›çš„ candidate ä¸ºä»€ä¹ˆä¸€å®šæ­£ç¡®ï¼Ÿ**
  å› ä¸ºéå¤šæ•°å…ƒç´ çš„æ€»æ¬¡æ•°æ— æ³•å®Œå…¨æŠµæ¶ˆæ‰å¤šæ•°å…ƒç´ çš„æ¬¡æ•°ï¼Œæœ€åå‰©ä¸‹çš„ä¸€å®šæ˜¯å®ƒã€‚

é¦–å…ˆé¢˜ç›®çš„è¦æ±‚å°±æ˜¯æ‰¾å‡ºå‡ºç°æœ€å¤šçš„å…ƒç´ ï¼Œå¹¶ä¸”æ˜ç¡®äº†æœ€å¤šçš„æ¬¡æ•°è¶…è¿‡æ•°ç»„æ€»å…ƒç´ ä¸€èˆ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æŠ•ç¥¨ç®—æ³•è§£å†³ï¼šæ ¸å¿ƒå°±æ˜¯ä¸æ–­æŠµæ¶ˆå…ƒç´ ä¸ªæ•°ï¼Œå¦‚æœéå†åˆ°çš„å…ƒç´ ä¸ªæ•°ä¸º0è¯´æ˜è¯¥å…ƒç´ ä¸å…¶ä»–å…ƒç´ ç›¸æ¯”è¦å°‘ï¼›å®ç°ï¼šé¦–å…ˆéœ€è¦åˆå§‹åŒ–å€™é€‰äººå’Œæ•°é‡ï¼ˆé€šè¿‡æ•°é‡åˆ¤æ–­æ¥æ›´æ–°å€™é€‰äººï¼‰ï¼›æ¥ç€éå†æ•°ç»„ï¼Œå¦‚æœæ­¤æ—¶æ¬¡æ•°ä¸º0ï¼Œè¯¥ä¸Šä¸€æ¬¡éå†åˆ°çš„å…ƒç´ ä¸ªæ•°ç›¸æ¯”å…¶ä»–è¦å°‘ï¼Œæ‰€ä»¥éœ€è¦æ›´æ–°å€™é€‰äººä¸ºå½“å‰éå†åˆ°çš„å…ƒç´ ï¼Œç„¶åå°±æ˜¯å¯¹è®¡æ•°çš„å®ç°ï¼Œå¦‚æœæ˜¯å€™é€‰äººé‚£ä¹ˆå°±+1ï¼Œä¸æ˜¯å°±-1ï¼›æœ€åéå†ç»“æŸè¿”å›å€™é€‰äººä¸€å®šæ˜¯å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„ï¼Œå¹¶ä¸”è®¡æ•°è‚¯å®šæ˜¯å¤§äº0çš„ã€‚åœ¨æ›´æ–°å€™é€‰äººæ˜¯ç”¨å½“å‰éå†åˆ°çš„å…ƒç´ ï¼Œä¸æ˜¯âš ï¸ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå› ä¸ºä¸Šä¸€æ¬¡éå†çš„å…ƒç´ åœ¨æœ€åæ›´æ–°æ¬¡æ•°ä¸º0ï¼Œé‚£ä¹ˆå°±å°†å€™é€‰äººæ›´æ–°å½“å‰éå†åˆ°çš„å…ƒç´ 



## ğŸ’¡ ä¸€ã€æ ¸å¿ƒç†è§£ï¼šcount = 0 æ„å‘³ç€â€œä¸Šä¸€ä¸ªå€™é€‰äººè¢«æŠµæ¶ˆå®Œäº†â€

åœ¨ç®—æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼š

- `count` è®°å½•çš„æ˜¯å½“å‰å€™é€‰äººç›¸å¯¹äºå…¶ä»–å…ƒç´ çš„â€œå‡€ç¥¨æ•°â€ï¼›

- å½“ `count == 0` æ—¶ï¼Œè¡¨ç¤ºï¼š

  > ä¹‹å‰çš„å€™é€‰äººç´¯è®¡çš„ä¼˜åŠ¿ç¥¨æ•°å·²ç»è¢«å…¶ä»–å…ƒç´ æŠµæ¶ˆå®Œäº†ï¼Œ
  >  æ¢å¥è¯è¯´â€”â€”â€œä¸Šä¸€ä¸ªå€™é€‰äººè¢«æ·˜æ±°äº†â€ã€‚

------

## âš™ï¸ äºŒã€ä»£ç é€»è¾‘æ—¶åºç†è§£

æ¥çœ‹ä»£ç çš„å…³é”®éƒ¨åˆ†ï¼š

```
for (int num : nums) {
    if (count == 0) {
        candidate = num; // âš ï¸ å½“å‰å…ƒç´ æˆä¸ºæ–°çš„å€™é€‰äºº
    }
    count += (num == candidate) ? 1 : -1;
}
```

å½“ `count == 0` æ—¶ï¼š

- æ„å‘³ç€å‰ä¸€è½®å€™é€‰äººâ€œå¤±å»äº†æ‰€æœ‰ä¼˜åŠ¿â€ï¼›
- æ‰€ä»¥æˆ‘ä»¬è®©**å½“å‰æ­£åœ¨éå†çš„å…ƒç´ **æˆä¸ºæ–°çš„å€™é€‰äººã€‚

æ³¨æ„è¿™ä¸ªç»†èŠ‚é¡ºåºï¼š

| æ­¥éª¤ | å½“å‰å…ƒç´              | countçŠ¶æ€  | æ“ä½œ                     |
| ---- | -------------------- | ---------- | ------------------------ |
| 1    | ä¸Šä¸€ä¸ªå€™é€‰äººè¢«æŠµæ¶ˆå®Œ | count == 0 | è¯´æ˜ä¸Šä¸€ä¸ªå€™é€‰äººå‡ºå±€     |
| 2    | å½“å‰å¾ªç¯éå†åˆ°æ–°å…ƒç´  | â€”          | æŠŠå½“å‰å…ƒç´ è®¾ä¸ºæ–°çš„å€™é€‰äºº |
| 3    | å¯¹å½“å‰å…ƒç´ è¿›è¡Œè®¡æ•°   | count += 1 | æ–°å€™é€‰äººè·å¾—ç¬¬ä¸€ç¥¨       |

> ğŸ”¹ ä¹Ÿå°±æ˜¯è¯´ï¼Œ**æ›´æ–°å€™é€‰äººå‘ç”Ÿåœ¨â€œå½“å‰å…ƒç´ â€è¿™é‡Œï¼Œä¸æ˜¯ä¸‹ä¸€ä¸ªå…ƒç´ **ï¼Œ
>  å› ä¸ºâ€œè®¡æ•°å½’é›¶â€æ˜¯åœ¨è¿™ä¸€è½®å¾ªç¯å†…å°±å·²ç»åˆ¤æ–­å‡ºæ¥çš„ç»“æœã€‚

------

## ğŸ“˜ ä¸¾ä¸ªä¾‹å­è¯´æ˜

æ•°ç»„ï¼š`[2, 2, 1, 1, 1, 2, 2]`

| å…ƒç´  | å€™é€‰äºº | countå˜åŒ– | è¯´æ˜                                      |
| ---- | ------ | --------- | ----------------------------------------- |
| 2    | 2      | 1         | è®¾å€™é€‰äºº=2ï¼Œ+1                            |
| 2    | 2      | 2         | ç›¸åŒ+1                                    |
| 1    | 2      | 1         | ä¸åŒ-1                                    |
| 1    | 2      | 0         | ä¸åŒ-1 â†’ å½’é›¶ï¼Œå€™é€‰äººè¢«æŠµæ¶ˆå®Œ             |
| 1    | 1      | 1         | âš ï¸ æ­¤æ—¶ count==0ï¼Œæ›´æ–°å€™é€‰äºº=å½“å‰1ï¼Œç„¶å+1 |
| 2    | 1      | 0         | ä¸åŒ-1 â†’ å½’é›¶                             |
| 2    | 2      | 1         | count==0ï¼Œæ›´æ–°å€™é€‰äºº=å½“å‰2ï¼Œç„¶å+1        |

éå†ç»“æŸå `candidate = 2`ï¼Œå³ä¸ºå¤šæ•°å…ƒç´ ã€‚

## âœ… æ€»ç»“ä¸€å¥è¯

> â€œcount å½’é›¶â€ä»£è¡¨æ—§å€™é€‰äººè¢«å®Œå…¨æŠµæ¶ˆï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨**ä¸‹ä¸€æ¬¡åˆ¤æ–­æ—¶ç«‹åˆ»è®©å½“å‰éå†åˆ°çš„å…ƒç´ æˆä¸ºæ–°çš„å€™é€‰äºº**ã€‚
>  æ¢å¥è¯è¯´ï¼Œ**æ›´æ–°å€™é€‰äººå‘ç”Ÿåœ¨â€œå½’é›¶é‚£ä¸€è½®â€çš„å½“å‰å…ƒç´ ï¼Œè€Œä¸æ˜¯ç­‰åˆ°ä¸‹ä¸€è½®**ã€‚