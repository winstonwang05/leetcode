# 206.åè½¬é“¾è¡¨

## 	æ€è·¯ä¸€ï¼šè¿­ä»£æ³•ï¼ˆåŒæŒ‡é’ˆï¼‰

â€‹

```
class Solution {
    public ListNode reverseList(ListNode head) {
        ListNode prev = null;      // å·²åè½¬éƒ¨åˆ†çš„å¤´ï¼ˆå¼€å§‹ä¸ºç©ºï¼‰
        ListNode cur = head;       // å½“å‰æ­£åœ¨å¤„ç†çš„ç»“ç‚¹
        while (cur != null) {
            ListNode next = cur.next; // 1) å…ˆä¿å­˜ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œé¿å…ä¸¢å¤±å‰©ä½™é“¾è¡¨
            cur.next = prev;          // 2) æ–­å¼€å¹¶åè½¬æŒ‡é’ˆï¼šå½“å‰ç»“ç‚¹æŒ‡å‘å·²åè½¬éƒ¨åˆ†
            prev = cur;               // 3) prev å‰è¿›ï¼ˆå·²åè½¬é“¾è¡¨å¢žåŠ ä¸€ä¸ªç»“ç‚¹ï¼‰
            cur = next;               // 4) cur å‰è¿›åˆ°å‰©ä½™é“¾è¡¨çš„ä¸‹ä¸€ä¸ªç»“ç‚¹
        }
        return prev; // prev æŒ‡å‘æ–°çš„å¤´ç»“ç‚¹ï¼ˆå½“ cur å˜ä¸º null æ—¶ï¼‰
    }
}

```

### while å¾ªçŽ¯é‡Œçš„ä¸‰ä¸ªåŠ¨ä½œ

å‡è®¾å½“å‰å¤„ç†çš„ç»“ç‚¹æ˜¯ `cur`ï¼Œä¸Šä¸€æ¬¡åè½¬å®Œæˆçš„é“¾è¡¨å¤´æ˜¯ `pre`ï¼š

1. **ä¿å­˜åŽç»§ç»“ç‚¹**

   ```
   next = cur.next;
   ```

   ðŸ‘‰ ä¿å­˜åŽŸé“¾è¡¨ä¸­å½“å‰ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œé¿å…ä¸¢å¤±ã€‚

2. **åè½¬æŒ‡é’ˆ**

   ```
   cur.next = pre;
   ```

   ðŸ‘‰ è®©å½“å‰ç»“ç‚¹æŒ‡å‘ `pre`ï¼ˆå·²ç»åè½¬å¥½çš„éƒ¨åˆ†ï¼‰ã€‚è¿™ä¸€æ­¥å°±æ˜¯â€œåè½¬â€çš„æœ¬è´¨ã€‚

3. **æŽ¨è¿›æŒ‡é’ˆ**

   ```
   pre = cur;
   cur = next;
   ```

   ðŸ‘‰ æ›´æ–° `pre` å’Œ `cur`ï¼Œå‡†å¤‡å¤„ç†ä¸‹ä¸€ä¸ªç»“ç‚¹ã€‚



### è¿­ä»£åè½¬é“¾è¡¨çš„æµç¨‹ï¼ˆæ ‡å‡†è¡¨è¿°ï¼‰

1. **åˆå§‹åŒ–**
   - å…ˆæŠŠåè½¬é“¾è¡¨çš„å¤´ç»“ç‚¹ `pre` è®¾ä¸º `null`ï¼Œå› ä¸ºåè½¬ä¹‹åŽåŽŸé“¾è¡¨çš„å¤´ç»“ç‚¹è¦æŒ‡å‘ `null`ã€‚
   - ç”¨ `cur` æŒ‡å‘åŽŸé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œè¡¨ç¤ºå½“å‰æ­£åœ¨å¤„ç†çš„ç»“ç‚¹ã€‚
2. **å¾ªçŽ¯æ¡ä»¶**
   - å½“ `cur != null` æ—¶ç»§ç»­å¾ªçŽ¯ï¼Œä¸€æ—¦ `cur` ä¸ºç©ºï¼Œè¯´æ˜Žå·²ç»éåŽ†å®Œæ•´ä¸ªé“¾è¡¨ï¼Œåè½¬å®Œæˆã€‚
3. **å¾ªçŽ¯ä½“**
   - ä¿å­˜ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼š`next = cur.next`ï¼ˆé˜²æ­¢åè½¬æŒ‡é’ˆåŽä¸¢å¤±å‰©ä½™é“¾è¡¨ï¼‰ã€‚
   - åè½¬å½“å‰ç»“ç‚¹ï¼š`cur.next = pre`ï¼ˆè®©å½“å‰ç»“ç‚¹æŒ‡å‘å·²ç»åè½¬å¥½çš„éƒ¨åˆ†ï¼‰ã€‚
   - æŽ¨è¿›åè½¬é“¾è¡¨ï¼š`pre = cur`ï¼ˆæŠŠå½“å‰ç»“ç‚¹ä½œä¸ºæ–°çš„å¤´ç»“ç‚¹ï¼‰ã€‚
   - ç»§ç»­éåŽ†ï¼š`cur = next`ï¼ˆå¤„ç†åŽŸé“¾è¡¨çš„ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼‰ã€‚
4. **ç»“æŸè¿”å›ž**
   - å½“å¾ªçŽ¯ç»“æŸæ—¶ï¼Œ`pre` æŒ‡å‘çš„å°±æ˜¯åè½¬åŽé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œç›´æŽ¥è¿”å›žå³å¯ã€‚

### ä¸ªäººç†è§£è¡¨è¿°ï¼š

â€‹	é¦–å…ˆå°†åè½¬åŽçš„å¤´èŠ‚ç‚¹è®¾ä¸ºnullï¼Œå› ä¸ºå¤´èŠ‚ç‚¹åè½¬ä¹‹åŽæŒ‡å‘çš„å°±æ˜¯nullï¼Œæ‰€ä»¥æˆ‘ä»¬å°±è¦ä»Žè¿™å¼€å§‹ï¼Œå†æŠŠå¤´èŠ‚ç‚¹èµ‹å€¼ç»™curè¡¨ç¤ºå½“å‰ç»“ç‚¹ï¼Œä»¥ä¾¿åŽé¢åè½¬é“¾è¡¨æ‹¼æŽ¥ï¼›å¾ªçŽ¯ç»“æŸçš„æ¡ä»¶æ˜¯ä¸€æ—¦éåŽ†åˆ°æŸä¸ªç»“ç‚¹ä¸ºç©ºï¼Œé‚£ä¹ˆè¯´æ˜ŽåŽŸé“¾è¡¨å·²ç»åè½¬å®Œæˆäº†ï¼›é€šè¿‡æ‰§è¡Œçš„ç»“ç‚¹å†åŽŸé“¾è¡¨ä¸­æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ä¿¡æ¯èµ‹å€¼ä¸ºnextï¼Œå…¶å®žå°±æ˜¯ä¸ºäº†ä¸‹ä¸€æ¬¡è¿­ä»£/éåŽ†çš„ç»“ç‚¹ï¼›å†å°†æ‰§è¡Œåˆ°å½“å‰ç»“ç‚¹æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹cur.nextä¸ºpreï¼ˆå³cur.next = preï¼‰è¿™é‡Œå°±æ˜¯å°†é“¾è¡¨é¡ºåºåè¿‡æ¥äº†ï¼Œç„¶åŽä¸ºäº†æŽ¨è¿›åè½¬é“¾è¡¨ï¼Œå°†curèµ‹å€¼ç»™preï¼Œä¾›ç»™ä¸‹ä¸€æ¬¡è¿­ä»£ç»“ç‚¹æŒ‡å‘ï¼›æœ€åŽå°†åŽŸæ¥çš„next = curï¼Œæ‰€ä»¥ä¸‹ä¸€æ¬¡è¿­ä»£å°±ä»Žè¿™ä¸ªnextå¼€å§‹

### åŽŸé“¾è¡¨æ–¹å‘

- **åŽŸé“¾è¡¨**ï¼šä»Žå·¦åˆ°å³

  ```
  head â†’ node1 â†’ node2 â†’ node3 â†’ â€¦ â†’ null
  ```

- **åè½¬åŽé“¾è¡¨**ï¼šä»Žå³åˆ°å·¦

  ```
  nodeN â†’ â€¦ â†’ node3 â†’ node2 â†’ node1 â†’ null
  ```

ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŽŸé“¾è¡¨çš„ **å¤´ç»“ç‚¹**ï¼ˆæœ€å·¦è¾¹ï¼‰ä¼šå˜æˆåè½¬åŽé“¾è¡¨çš„ **å°¾ç»“ç‚¹**ï¼ˆæœ€å³è¾¹ï¼ŒæŒ‡å‘ nullï¼‰ã€‚
åŽŸé“¾è¡¨çš„ **å°¾ç»“ç‚¹**ï¼ˆæœ€å³è¾¹ï¼‰ä¼šå˜æˆåè½¬åŽé“¾è¡¨çš„ **å¤´ç»“ç‚¹**ã€‚

## 	æ€è·¯äºŒï¼šé€’å½’æ³•



è¿™æ ·çœ‹

```
head.next.next = head; // head.nextçœ‹ä½œä¸€ä¸ªæ•´ä½“è¡¨ç¤ºåŽŸé“¾è¡¨çš„ä¸­å½“å‰ç»“ç‚¹æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€ï¼Œåœ¨è¿™åŸºç¡€ä¸Šï¼ˆhead.nextï¼‰.next = head è¡¨ç¤ºè¿™ä¸ªç»“ç‚¹æŒ‡å‘å½“å‰æ‰§è¡Œçš„ç»“ç‚¹ï¼Œå°±æ˜¯åå‘äº†
head.next = null; // å°†å½“å‰ç»“ç‚¹çš„æŒ‡å‘ä¸ºnull 
```



### é€’å½’åè½¬é“¾è¡¨çš„æ€è·¯ï¼ˆè¯¦ç»†ï¼‰

1. **åŸºå‡†æƒ…å†µ**

   - å¦‚æžœ `head == null`ï¼šè¯´æ˜Žæ˜¯ç©ºé“¾è¡¨ï¼Œç›´æŽ¥è¿”å›ž `null`ã€‚
   - å¦‚æžœ `head.next == null`ï¼šè¯´æ˜Žé€’å½’åˆ°äº†æœ€åŽä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå°¾èŠ‚ç‚¹ï¼‰ï¼Œç›´æŽ¥è¿”å›žå®ƒä½œä¸ºåè½¬åŽé“¾è¡¨çš„æ–°å¤´ã€‚

2. **é€’å½’è¿‡ç¨‹**

   - è°ƒç”¨ `reverseList(head.next)`ï¼ŒåŽ»åè½¬åŽé¢éƒ¨åˆ†çš„é“¾è¡¨ã€‚é€’å½’ä¼šä¸€ç›´åˆ°åº•ï¼Œåˆ°æœ€åŽä¸€ä¸ªèŠ‚ç‚¹è¿”å›žã€‚
   - å‡è®¾è¿”å›žå€¼ `newHead` å§‹ç»ˆæŒ‡å‘åè½¬åŽçš„æ–°å¤´èŠ‚ç‚¹ã€‚

3. **å›žæº¯é˜¶æ®µè°ƒæ•´æŒ‡é’ˆ**

   - å…³é”®æ“ä½œï¼š

     ```
     head.next.next = head;
     head.next = null;
     ```

     å«ä¹‰ï¼š

      - `head.next.next = head`ï¼šè®©åŽŸæœ¬æŒ‡å‘ `head` çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹åè¿‡æ¥æŒ‡å‘ `head`ã€‚
      - `head.next = null`ï¼šæ–­å¼€å½“å‰èŠ‚ç‚¹å’ŒåŽç»­èŠ‚ç‚¹çš„åŽŸå§‹è¿žæŽ¥ï¼Œé¿å…çŽ¯ã€‚

4. **è¿”å›žç»“æžœ**

   - æ¯ä¸€å±‚é€’å½’éƒ½è¿”å›ž `newHead`ï¼Œå³æœ€åˆçš„å°¾èŠ‚ç‚¹ã€‚
   - å½“é€’å½’å®Œå…¨å±•å¼€æ—¶ï¼Œæ•´ä¸ªé“¾è¡¨å·²ç»åè½¬å®Œæˆã€‚

------

### ä¸¾ä¸ªä¾‹å­ï¼šåŽŸé“¾è¡¨ `4 â†’ 5 â†’ null`

- **é€’å½’åˆ°åº•**ï¼šåˆ°èŠ‚ç‚¹ `5`ï¼Œè¿”å›ž `5`ã€‚
- **å›žæº¯åˆ°èŠ‚ç‚¹ 4**ï¼š
   - `head = 4`ï¼Œ`head.next = 5`ã€‚
   - æ‰§è¡Œ `head.next.next = head` â†’ `5.next = 4`ï¼Œæ­¤æ—¶é“¾è¡¨å˜æˆ `5 â†’ 4`ã€‚
   - æ‰§è¡Œ `head.next = null` â†’ `4.next = null`ï¼Œé“¾è¡¨å˜æˆ `5 â†’ 4 â†’ null`ã€‚
   - è¿”å›ž `newHead = 5`ã€‚

æœ€ç»ˆè¿”å›ž `5 â†’ 4 â†’ null`ã€‚

é¦–å…ˆåˆ¤æ–­headæ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºè¯´æ˜Žå°±æ˜¯ç©ºé“¾è¡¨ï¼Œç„¶åŽå†åˆ¤æ–­å½“å‰ç»“ç‚¹æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ä¿¡æ¯æ˜¯å¦ä¸ºnullï¼Œä¸ºnullè¯´æ˜Žå°±ä¸€ä¸ªç»“ç‚¹ï¼ŒåŽé¢æ²¡æœ‰äº†ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯éåŽ†çš„åŽŸé“¾è¡¨çš„æœ€åŽä¸€ä¸ªï¼Œå› ä¸ºé€’å½’åˆ°åŽŸé“¾è¡¨çš„æœ€åŽä¸€ä¸ªç»“ç‚¹çš„æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ä¿¡æ¯å°±æ˜¯nullï¼›ç„¶åŽé€’å½’ï¼Œé€šè¿‡æŠŠ å½“å‰ç»“ç‚¹ä¿¡æ¯ è®¾ç½®ç»™ å½“å‰ç»“ç‚¹åœ¨åŽŸé“¾è¡¨æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ä¿¡æ¯åœ¨è¿™åŸºç¡€ä¸Šnextè¡¨ç¤ºæŒ‡å‘ï¼Œç›¸å½“äºŽæ˜¯é“¾è¡¨åè½¬äº†ï¼ŒæŒ‡å‘æ–¹å‘é¡ºåºåè¿‡æ¥äº†ï¼ŒæŽ¥ç€å°†å½“å‰ç»“ç‚¹æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ä¿¡æ¯ä¸ºnullï¼Œæ€•å‡ºçŽ°çŽ¯å½¢é“¾è¡¨ï¼Œè¿”å›žçš„ç»“æžœå°±æ˜¯ï¼ˆæ¯”å¦‚head ä¸º 4 ï¼Œé‚£ä¹ˆå°±æ˜¯5 ->4 ->nullï¼‰,ä¸€ç›´å›žæº¯åˆ°åŽŸé“¾è¡¨å¤´ç»“ç‚¹æ—¶ï¼Œé¦–å…ˆnewhead å°±æ˜¯ å¤´ç»“ç‚¹åœ¨åŽŸé“¾è¡¨ä¸­æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ä¿¡æ¯ç„¶åŽåè½¬åˆ°å½“å‰ä½ç½® ï¼ˆ..åŽŸé“¾è¡¨ä¸‹ä¸€ä¸ªç»“ç‚¹->nullï¼‰æ‰€ä»¥ head.next.next = head;   head.next = null;ç„¶åŽå¾—åˆ°ï¼ˆ..åŽŸé“¾è¡¨ä¸‹ä¸€ä¸ªç»“ç‚¹->å¤´ç»“ç‚¹->nullï¼‰

### åŽŸé“¾è¡¨å¤´ç»“ç‚¹ä¹Ÿå°±æ˜¯å›žæº¯åˆ°æœ€å¤–å±‚é€’å½’

<img width="1088" height="738" alt="image" src="https://github.com/user-attachments/assets/40ffd948-aba5-48c9-9e40-97ed9031f7f2" />

å°±æ˜¯é€’å½’åˆ°æœ€å¤–å±‚çš„æ—¶å€™
